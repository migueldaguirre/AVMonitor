<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Models &amp; CRUD Â· Knowledge</title>
    <link rel="stylesheet" media="all" href="/assets/application-ed1e2952fec7f0c76671cd08e6ab093cb9398009761b98e283a85def55b70ab7.css" />
    
    <link rel="icon" type="image/png" href="/assets/favicon-9e84d1cd6dffd89d572b8c6a542cadda0b2091f8fc65f9cc1f09f09ca363bb19.png" />
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Bt1EXbL1zmi/PtHlqHr0PkstXxHwkNuWG8BEeYBER+nVrvaziG3a1rppfVox4GKOFOLB40V2tUXG/4wqo2Kc+Q==" />
  </head>
  <body class='bg-grey'>
    
    
    <div class="wrapper-white ">
  <div class="container">
    <div class="navbar-kitt">
      <a class="logo" href="/">
         <?xml version="1.0" encoding="UTF-8"?>
<svg width="850px" height="850px" viewBox="0 0 850 850" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch -->
    <title>Artboard - Red Circle</title>
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Artboard---Red-Circle">
            <path d="M425.049676,849.041674 C659.268861,849.041674 849.141025,659.169509 849.141025,424.950324 C849.141025,190.731139 659.268861,0.858974734 425.049676,0.858974734 C190.830491,0.858974734 0.958326028,190.731139 0.958326028,424.950324 C0.958326028,659.169509 190.830491,849.041674 425.049676,849.041674 Z" id="Red-circle" fill="#D23333"></path>
            <g id="Le-Wagon-icon" transform="translate(148.000000, 254.000000)" fill="#FFFFFF">
                <path d="M126.678499,239.667762 C98.6149456,239.667762 75.9234204,262.360385 75.9234204,290.422841 C75.9234204,318.486394 98.6160426,341.177919 126.678499,341.177919 C154.740955,341.177919 177.433577,318.485297 177.433577,290.422841 C177.433577,262.360385 154.740955,239.667762 126.678499,239.667762 L126.678499,239.667762 Z M126.678499,317.680096 C111.505838,317.680096 99.018643,305.192901 99.018643,290.02024 C99.018643,274.84758 111.505838,262.360385 126.678499,262.360385 C141.851159,262.360385 154.338354,274.84758 154.338354,290.02024 C154.338354,305.595501 142.25376,317.680096 126.678499,317.680096 L126.678499,317.680096 Z" id="Back-wheel"></path>
                <path d="M421.004639,239.667762 C392.941086,239.667762 370.24956,262.360385 370.24956,290.422841 C370.24956,318.486394 392.942183,341.177919 421.004639,341.177919 C449.068192,341.177919 471.759717,318.485297 471.759717,290.422841 C471.760814,262.360385 449.068192,239.667762 421.004639,239.667762 L421.004639,239.667762 Z M421.004639,317.680096 C405.831978,317.680096 393.344783,305.192901 393.344783,290.02024 C393.344783,274.84758 405.831978,262.360385 421.004639,262.360385 C436.177299,262.360385 448.664495,274.84758 448.664495,290.02024 C448.665592,305.595501 436.178396,317.680096 421.004639,317.680096 L421.004639,317.680096 Z" id="Front-wheel"></path>
                <path d="M126.678499,229.462335 C160.515583,229.462335 187.639004,256.585756 187.639004,290.422841 L360.046327,290.422841 C360.046327,256.585756 387.169748,229.462335 421.006833,229.462335 C454.843917,229.462335 481.967338,256.585756 481.967338,290.422841 L545.209612,289.080108 C545.209612,289.080108 554.608741,285.992042 554.608741,267.730219 C554.608741,249.469492 542.121546,247.723062 542.121546,247.723062 L512.71526,247.320461 C512.71526,247.320461 508.808855,224.494005 484.651707,201.398782 C460.494559,178.30356 425.840232,178.30356 425.840232,178.30356 L6.773781,180.048893 L6.773781,262.895723 C6.773781,262.895723 0.597649173,259.270125 0.19504875,276.189216 C-0.20974568,292.705706 7.30911889,290.02024 7.30911889,290.02024 L65.7179933,290.422841 C65.7179933,256.500926 92.8414141,229.462335 126.678499,229.462335 Z" id="Bottom-frame"></path>
                <path d="M540.374019,162.729396 L538.091154,133.726807 C538.091154,133.726807 521.745223,80.3983375 482.537207,39.8475892 L488.753652,39.8475892 C470.872067,4.21981763 328.221136,2.24097186 277.601001,0.527499367 C226.039625,-1.2178338 33.4924074,12.0745622 14.425383,29.5300879 C5.96638615,37.0489524 7.30911889,48.1945118 7.30911889,48.1945118 L7.30911889,164.474729 L426.145189,164.474735 C426.145189,164.474735 464.335975,164.474735 493.646042,188.106386 C519.102625,208.631113 525.200261,239.801597 525.200261,239.801597 L540.372922,239.801597 L539.970321,193.879918 L546.683985,194.282518 C553.263814,184.078188 550.578349,166.220062 545.74495,162.729396 L540.374019,162.729396 Z M143.236675,135.068443 C143.236675,137.351308 141.491342,139.096641 139.208477,139.096641 L54.2137136,139.096641 C51.9308486,139.096641 50.1855154,137.351308 50.1855154,135.068443 L50.1855154,50.8788803 C50.1855154,48.5960152 51.9308486,46.8506821 54.2137136,46.8506821 L139.208477,46.8506821 C141.491342,46.8506821 143.236675,48.5960152 143.236675,50.8788803 L143.236675,135.068443 L143.236675,135.068443 Z M257.883453,135.47214 C257.883453,137.755005 256.13812,139.500338 253.855255,139.500338 L168.860492,139.500338 C166.577627,139.500338 164.832294,137.755005 164.832294,135.47214 L164.832294,51.2825777 C164.832294,48.9997127 166.577627,47.2543795 168.860492,47.2543795 L253.855255,47.2543795 C256.13812,47.2543795 257.883453,48.9997127 257.883453,51.2825777 L257.883453,135.47214 L257.883453,135.47214 Z M371.966244,135.47214 C371.966244,137.755005 370.220911,139.500338 367.938046,139.500338 L282.943283,139.500338 C280.660417,139.500338 278.915084,137.755005 278.915084,135.47214 L278.915084,51.2825777 C278.915084,48.9997127 280.660417,47.2543795 282.943283,47.2543795 L368.072977,47.2543795 C370.355842,47.2543795 372.101176,48.9997127 372.101176,51.2825777 L372.101176,135.47214 L371.966244,135.47214 L371.966244,135.47214 Z M398.490383,139.657207 C394.059584,139.657207 391.847245,139.070446 391.847245,134.684349 L391.847245,55.0538354 C391.847245,50.667738 391.464472,47.411251 395.895271,47.411251 L448.913387,47.411251 C478.722273,47.411251 512.155661,105.629391 512.155661,120.648978 C512.156758,135.270027 508.53116,139.65721 504.502961,139.65721 L398.490383,139.657207 Z" id="Top-Frame"></path>
            </g>
        </g>
    </g>
</svg>
</a>      <nav>


              <a class="" href="/">Bootcamp</a>

            <a class="active" href="/knowledge/lectures">Knowledge</a>

            <a class="" href="/alumni">Alumni</a>

          <div class="dropdown batch-dropdown avatar-dropdown">
            <a class="avatar-link" data-toggle="dropdown" href="#">
              <img alt="" class="rounded-circle" src="https://avatars2.githubusercontent.com/u/11828031?v=4" />
            </a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
  <li>
    <a href="/alumni/migueldaguirre">
      <i class="fas fa-user"></i> My profile
</a>  </li>
  <li>
    <a rel="nofollow" data-method="delete" href="/users/sign_out">
      <i class="fas fa-sign-out-alt"></i>
      <span>Sign out</span>
</a>  </li>
</ul>

          </div>
      </nav>
    </div>
  </div>
</div>

    <div class="flash-container">
</div>

      <div id="unsolved-ticket-modal-container"></div>
  <div id="ticket-with-skills-modal-container"></div>

    

    

<div class="wrapper-black">
  <div class="container">
    <nav class="section-nav">
      <div class="left-nav">
        <a class="active" href="/knowledge/lectures">
          <div class="d-none d-sm-block">Lectures</div>
          <div class="d-sm-none">
            <i class="mdi mdi-presentation-play"></i>
              Lectures
          </div>
</a>        <a class="" href="/knowledge/tutorials">
          <div class="d-none d-sm-block">Tutorials</div>
          <div class="d-sm-none">
            <i class="mdi mdi-file-document-box"></i>
          </div>
</a>        <a class="" href="/knowledge/cheatsheets">
          <div class="d-none d-sm-block">Cheatsheets</div>
          <div class="d-sm-none">
            <i class="mdi mdi-format-list-bulleted"></i>
          </div>
</a>        <a class="" href="/knowledge/resources">
          <div class="d-none d-sm-block">Resources</div>
          <div class="d-sm-none">
            <i class="mdi mdi-link-variant"></i>
          </div>
</a>          <a class="" href="/knowledge/tracks/react-redux">
            <div class="d-none d-sm-block">React &amp; Redux</div>
            <div class="d-sm-none">
              <i class="mdi mdi-link-variant"></i>
            </div>
</a>      </div>
      <div class="right-nav">
        
      </div>
    </nav>
  </div>
</div>


<div class="container">
  <div class="small-container">
    <div class="lecture-header">
      <div class="lecture-header-section">
        <svg viewBox="0 0 201 197" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="rails" fill="#C22821">
            <g id="Page-1">
                <path d="M22.3169363,196.48354 L119.927798,196.48354 C119.927798,196.48354 98.2756773,147.307837 103.776867,102.169866 C109.278058,57.0318957 144.877106,36.4817767 165.056952,34.2777742 C185.236799,32.0737718 196.247995,44.5572417 196.247995,44.5572417 L200.656,37.9540503 C200.656,37.9540503 171.66896,8.59673746 134.96791,11.9027412 C98.2668613,15.2087449 72.947281,39.426324 57.1754393,68.7836369 C41.3947816,98.1409497 32.2173153,118.691069 25.9843964,149.520655 C19.7514774,180.350242 22.3169363,196.492356 22.3169363,196.492356 L22.3169363,196.48354 L22.3169363,196.48354 Z M2.86881848,147.307837 L21.9466638,148.78011 L18.6406601,167.857956 L0.656,165.653953 L2.86000247,147.307837 L2.86881848,147.307837 L2.86881848,147.307837 Z M32.9578602,106.939328 L38.0975939,92.6309436 L21.214935,86.0277522 L15.7137449,101.438137 L32.9578602,106.939328 L32.9578602,106.939328 L32.9578602,106.939328 Z M56.8139829,57.7636245 L66.723178,46.0206994 L53.8782516,37.5837779 L43.6076001,48.9564307 L56.8139829,57.7636245 L56.8139829,57.7636245 L56.8139829,57.7636245 Z M82.8652921,12.2641976 L91.6724859,22.9051215 L103.785684,15.9316577 L94.9784896,6.02246258 L82.8652921,12.2641976 L82.8652921,12.2641976 L82.8652921,12.2641976 Z M125.79926,0.151 L128.003263,10.7919239 L143.052191,10.4216515 L141.579918,0.88272882 L125.79926,0.151 L125.79926,0.151 L125.79926,0.151 Z M176.808693,11.5236527 L176.438421,18.1268441 L186.717888,23.6280343 L188.921891,20.3220306 L176.817509,11.5148367 L176.808693,11.5236527 L176.808693,11.5236527 Z M174.604691,39.7877804 L174.604691,45.2889706 L184.513886,46.3909718 L184.513886,41.9829669 L174.604691,39.7789644 L174.604691,39.7877804 L174.604691,39.7877804 Z M143.052191,44.5572417 L147.821653,53.3644356 L154.795117,47.8632454 L153.331659,41.9917829 L143.061007,44.5660577 L143.052191,44.5572417 L143.052191,44.5572417 Z M128.003263,55.9298945 L135.338183,66.9410908 L130.938994,74.6462834 L120.29807,62.9033583 L128.003263,55.9298945 L128.003263,55.9298945 L128.003263,55.9298945 Z M113.324606,86.3892086 L108.555145,95.9281313 L121.029799,106.569055 L123.96553,94.4558576 L113.324606,86.3803926 L113.324606,86.3892086 L113.324606,86.3892086 Z M108.184872,119.784254 L107.453144,132.62918 L122.863529,139.232372 L122.1318,127.119174 L108.184872,119.775438 L108.184872,119.784254 L108.184872,119.784254 Z M112.592877,165.283681 L116.269153,178.49888 L135.717271,179.600881 L128.743807,165.292497 L112.592877,165.292497 L112.592877,165.283681 L112.592877,165.283681 Z" id="Shape"></path>
            </g>
        </g>
    </g>
</svg>

        <h1 class="header-lecture-title">Models &amp; CRUD</h1>
      </div>
      <div class="lecture-header-section">
      </div>
    </div>
  </div>
  <div class="small-container">
    <div class="lecture-container">
      <!-- Nav tabs -->
      <ul class="nav nav-tabs list-inline " role="tablist">
          <li class="nav-item">
            <a class="nav-link iframe-lecture-tab active" data-toggle="tab" href="#slides0" role="tab" data-id="0"><i class="mdi mdi-presentation"></i>
              <span class="d-none d-md-inline">Slides</span>
            </a>
          </li>
        <li class="nav-item">
          <a class="nav-link resource-lecture-tab " data-toggle="tab" href="#video" role="tab">
            <i class="mdi mdi-play-circle"></i>
            <span class="d-none d-md-inline">Video</span>
          </a>
        </li>
          <li class="nav-item">
            <a class="nav-link resource-lecture-tab" data-toggle="tab" href="#source" role="tab">
              <i class="mdi mdi-file-presentation-box"></i>
              <span class="d-none d-md-inline">Source</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" target="_blank" href="/camps/138/challenges?path=05-Rails%2F02-Rails-CRUD">
              <i class="mdi mdi-check-circle"></i>
              <span class="d-none d-md-inline">Challenges</span>
</a>          </li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content main-content left-corner-not-rounded" id="js-tab-pane-content">
          <div class="tab-pane p-2 active karr-container" id="slides0" role="tabpanel">
            <iframe id="karr_0" src="/karr/lectures/rails/rails-crud/index.html?title=Rails%20CRUD" frameborder="0" class="karr-iframe"></iframe>
            <a title="Open Slides" class="full-screen-lecture" target="_blank" href="/karr/lectures/rails/rails-crud/index.html?title=Rails%20CRUD">
              <i class="mdi mdi-arrow-expand"></i>
</a>            <a title="Print Slides" class="print-lecture d-none d-sm-block" target="_blank" href="/karr/lectures/rails/rails-crud/index.html?title=Rails%20CRUD&amp;print-pdf">
              <i class="mdi mdi-printer"></i>
</a>          </div>
        <div class="tab-pane p-2 " id="video" role="tabpanel">
            <div class="tab-content">
      <div class="tab-pane active" id="video0" role="tabpanel">
          <video controls id="video_179077333" width="auto" height="auto" class="video-js vjs-default-skin" poster="https://i.vimeocdn.com/video/586885304_1280x720.jpg?r=pad" data-track-url="/knowledge/lectures/05-Rails%2F02-Rails-CRUD/track?locale=en">
            <source src="https://player.vimeo.com/external/179077333.hd.mp4?s=09ebae567e4bdd1164a218f0a281d6184df64244&amp;profile_id=119&amp;oauth2_token_id=907007082" type='video/mp4' data-res="HD" />
            <source src="https://player.vimeo.com/external/179077333.sd.mp4?s=4fd8da12324cf03cbfad8c9d20b614b88b4bd229&amp;profile_id=164&amp;oauth2_token_id=907007082" type='video/mp4' data-res="SD" />
          </video>
      </div>
      <div class="tab-pane active" id="video1" role="tabpanel">
          <video controls id="video_136631624" width="auto" height="auto" class="video-js vjs-default-skin" poster="https://i.vimeocdn.com/video/531211246_1280x720.jpg?r=pad" data-track-url="/knowledge/lectures/05-Rails%2F02-Rails-CRUD/track?locale=fr">
            <source src="https://player.vimeo.com/external/136631624.hd.mp4?s=ebb2c0c8252fcccf4d55c6b2898393e9f23080d1&amp;profile_id=113&amp;oauth2_token_id=907007082" type='video/mp4' data-res="HD" />
            <source src="https://player.vimeo.com/external/136631624.sd.mp4?s=0d03a405b9094d213e89aa6ba83233f694cab4ce&amp;profile_id=112&amp;oauth2_token_id=907007082" type='video/mp4' data-res="SD" />
          </video>
      </div>
  </div>
  <ul class="nav nav-underline nav-underline-left nav-underline-spaced" role="tablist">
      <li class="nav-item">
        <a class="tab-underline  no-border" data-toggle="tab" href="#video0" role="tab">
          ðŸ‡¬ðŸ‡§ <span class="d-none d-sm-inline">English</span> <small>(Aug 2016)</small>
        </a>
      </li>
      <li class="nav-item">
        <a class="tab-underline  no-border" data-toggle="tab" href="#video1" role="tab">
          ðŸ‡«ðŸ‡· <span class="d-none d-sm-inline">French</span> <small>(Aug 2015)</small>
        </a>
      </li>
  </ul>

        </div>
        <div class="tab-pane p-2" id="source">
          <div class="lecture-source">
              <h2>Setup</h2>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>new thespoon-with-activerecord
</code></pre></div>
<hr>

<h2>ActiveRecord in Rails</h2>

<ul>
<li><strong>The same good old ActiveRecord</strong> you <strong>already know</strong></li>
<li>Rails just has some useful generators for models &amp; migrations.</li>
</ul>

<h3>Model Generator</h3>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>generate model Restaurant name:string stars:integer
</code></pre></div>
<div class="down-arrow"></div>
<div class="highlight"><pre class="highlight shell"><code>      invoke  active_record
      create    db/migrate/YYYYMMDDHHMMSS_create_restaurants.rb
      create    app/models/restaurant.rb
</code></pre></div>
<h3>Auto-generated files</h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># db/migrate/YYYYMMDDHHMMSS_create_restaurants.rb</span>
<span class="k">class</span> <span class="nc">CreateRestaurants</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">5.1</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:restaurants</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:name</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">integer</span> <span class="ss">:stars</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/models/restaurant.rb</span>
<span class="k">class</span> <span class="nc">Restaurant</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="model" -->

<h3>Do not forget: apply the migration to schema</h3>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>db:migrate
</code></pre></div>
<p><br><br></p>

<p>This will create (and update then) the <code>db/schema.rb</code> file which holds
all your table definitions. Refer to it when in doubt about a table name
or a column name.</p>

<h3>And of course</h3>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">git </span>status
<span class="nb">git </span>add <span class="nb">.</span>
<span class="nb">git </span>commit <span class="nt">-m</span> <span class="s2">"Add restaurant model"</span>
</code></pre></div>
<h3><code>rails destroy</code></h3>

<p><strong>Just after</strong> the <code>rails g model</code>, if you made a typo on your model name, run:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>destroy model Restaurant
</code></pre></div>
<p>It will remove the migration and the <code>app/models/restaurant.rb</code>.</p>

<hr>

<h2>Migration generator</h2>

<p>Not the same as <strong>model</strong> generator! Use it to <strong>update</strong> an <strong>existing</strong> model.</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>g migration AddAddressToRestaurants
</code></pre></div>
<div class="down-arrow"></div>
<div class="highlight"><pre class="highlight shell"><code>      invoke  active_record
      create    db/migrate/YYYYMMDDHHMMSS_add_address_to_restaurants.rb
</code></pre></div>
<p>This generator creates a file skeleton. There&#39;s still work to do.</p>

<h3>Write your migration code</h3>

<p>The migration is empty by default. Populate the <code>change</code> method.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># db/migrate/YYYYMMDDHHMMSS_add_address_to_restaurants.rb</span>

<span class="k">class</span> <span class="nc">AddAddressToRestaurants</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">5.1</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">add_column</span> <span class="ss">:restaurants</span><span class="p">,</span> <span class="ss">:address</span><span class="p">,</span> <span class="ss">:string</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>db:migrate
</code></pre></div><div class="highlight"><pre class="highlight shell"><code><span class="nb">git </span>add <span class="nb">.</span>
<span class="nb">git </span>commit <span class="nt">-m</span> <span class="s2">"Add address to Restaurant"</span>
</code></pre></div>
<h3>Methods to be used in <code>change</code></h3>

<ul>
<li><code>add_column</code></li>
<li><code>change_column</code></li>
<li><code>rename_column</code></li>
<li><code>remove_column</code></li>
</ul>

<p><br><br></p>

<p>(And for 1:n, <code>add_reference</code>)</p>

<p><a href="http://guides.rubyonrails.org/migrations.html">Read more on Migrations</a></p>

<h2>Rails DB tasks</h2>

<ul>
<li><strong><code>rails db:drop</code></strong> - Drop the database (lose all your data!)</li>
<li><strong><code>rails db:create</code></strong> - Create the database with an empty schema</li>
<li><strong><code>rails db:migrate</code></strong> - Run pending migrations on the database schema</li>
<li><strong><code>rails db:rollback</code></strong> - Revert the last migration</li>
<li><strong><code>rails db:reset</code></strong> - Drop database + create tables found in schema.rb</li>
</ul>

<hr>

<h2>Rails console</h2>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>console  <span class="c"># or `rails c`</span>
</code></pre></div>
<p>You  can type ruby, with the <strong>rails environment loaded</strong>.</p>
<div class="highlight"><pre class="highlight irb"><code><span class="gp">[1] pry(main)&gt;</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">all</span>
<span class="c">#  Restaurant Load (1.4ms)  SELECT "restaurants".* FROM "restaurants"
# =&gt; #&lt;ActiveRecord::Relation []&gt;
</span></code></pre></div>
<p>No  more <code>require_relative</code>!</p>

<p>Use the console to create or explore your records.</p>

<h3>Rails console tips</h3>

<p>If you updated your model, do not restart the console. Just type:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">reload!</span>
</code></pre></div>
<p>To exit the console, just type:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="nb">exit</span>
</code></pre></div>
<h3>Sandbox</h3>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">rails </span>console <span class="nt">--sandbox</span>
</code></pre></div>
<p>All the changes you did (create / update / delete) will be rollbacked at exit.</p>

<hr>

<h2>CRUD</h2>

<p>Let&#39;s <strong>guess</strong> the routes we need!</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>

  <span class="c1"># What route convention @dhh did choose?</span>

  <span class="c1"># Generic route:</span>
  <span class="c1"># VERB PATH, to: 'CONTROLLER#ACTION'</span>

<span class="k">end</span>
</code></pre></div>
<!-- .element class="router" -->

<h3>Read (all)</h3>

<p><a href="http://localhost:3000/restaurants">http://localhost:3000/restaurants</a></p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"restaurants"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#index"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router fragment" data-fragment-index="1" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@restaurants</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="2" -->

<h3>Read (one)</h3>

<p><a href="http://localhost:3000/restaurants/4">http://localhost:3000/restaurants/4</a></p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"restaurants/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#show"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router fragment" data-fragment-index="1" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="2" -->

<h2>Create</h2>

<h3>What are the steps?</h3>

<ol>
<li><code>GET</code> the restaurant creation form = <strong>1 request</strong></li>
<li><code>POST</code> the parameters to create a new restaurant = <strong>1 request</strong></li>
</ol>

<h3>How many requests?</h3>

<h2>2 requests</h2>

<p><img src="/karr/assets/rails/create-5a8d6587dde0babb49e28d84a2810d016c4aee2ec11ca5b9713319b81d20c802.png" alt=""></p>

<h3>Create - Step 1, <code>GET</code> the form</h3>

<p><code>GET</code> <a href="http://localhost:3000/restaurants/new">http://localhost:3000/restaurants/new</a></p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"restaurants/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#new"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router fragment" data-fragment-index="1" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">new</span>
    <span class="p">?</span>  <span class="c1"># We'll see that in a moment.</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="2" -->

<h2>Create - Step 2, <code>POST</code> the form</h2>

<p><code>POST</code> <a href="http://localhost:3000/restaurants">http://localhost:3000/restaurants</a></p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">post</span> <span class="s2">"restaurants"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#create"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router fragment" data-fragment-index="1" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="p">?</span>  <span class="c1"># We'll see that in a moment.</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="2" -->

<h2>Update</h2>

<h3>What are the steps?</h3>

<ol>
<li><code>GET</code> the HTML form (pre-filled with restaurant attributes) for editing = <strong>1 request</strong></li>
<li><code>PATCH</code> the parameters to update an existing restaurant = <strong>1 request</strong></li>
</ol>

<h3>How many requests?</h3>

<h2>2 requests again!</h2>

<p><img src="/karr/assets/rails/update-1c0d398b5b3a6ac04baebbe6f64c983567bbf356ce9d7f8922543a314bd47180.png" alt=""></p>

<h3>Update - Step 1, <code>GET</code> the form</h3>

<p><code>GET</code> <a href="http://localhost:3000/restaurants/4/edit">http://localhost:3000/restaurants/4/edit</a></p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"restaurants/:id/edit"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#edit"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router fragment" data-fragment-index="1" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="2" -->

<h2>Update - Step 2, <code>PATCH</code> the form</h2>

<p><code>PATCH</code> <a href="http://localhost:3000/restaurants/4">http://localhost:3000/restaurants/4</a></p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">patch</span> <span class="s2">"restaurants/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#update"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router fragment" data-fragment-index="1" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@restaurant</span><span class="o">.</span><span class="p">?</span> <span class="c1"># We'll see that in a moment.</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="2" -->

<h2>Delete</h2>

<p><code>DELETE</code> <a href="http://localhost:3000/restaurants/4">http://localhost:3000/restaurants/4</a></p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">delete</span> <span class="s2">"restaurants/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#destroy"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router fragment" data-fragment-index="1" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">destroy</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="2" -->

<hr>

<h2>CRUD (Summary)</h2>

<h3>There are 7 CRUD routes</h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span>    <span class="s2">"restaurants"</span><span class="p">,</span>          <span class="ss">to: </span><span class="s2">"restaurants#index"</span>

  <span class="n">get</span>    <span class="s2">"restaurants/new"</span><span class="p">,</span>      <span class="ss">to: </span><span class="s2">"restaurants#new"</span>
  <span class="n">post</span>   <span class="s2">"restaurants"</span><span class="p">,</span>          <span class="ss">to: </span><span class="s2">"restaurants#create"</span>

  <span class="c1"># NB: The `show` route needs to be *after* `new` route.</span>
  <span class="n">get</span>    <span class="s2">"restaurants/:id"</span><span class="p">,</span>      <span class="ss">to: </span><span class="s2">"restaurants#show"</span>

  <span class="n">get</span>    <span class="s2">"restaurants/:id/edit"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"restaurants#edit"</span>
  <span class="n">patch</span>  <span class="s2">"restaurants/:id"</span><span class="p">,</span>      <span class="ss">to: </span><span class="s2">"restaurants#update"</span>

  <span class="n">delete</span> <span class="s2">"restaurants/:id"</span><span class="p">,</span>      <span class="ss">to: </span><span class="s2">"restaurants#destroy"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router" -->

<h3>Know them by heart</h3>

<h3>But don&#39;t write them all!</h3>

<p>You can express the 7 routes shown before with just one line in <code>config/routes.rb</code>:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">resources</span> <span class="ss">:restaurants</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router" -->

<h3>Subset of the 7 routes</h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">resources</span> <span class="ss">:restaurants</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:create</span><span class="p">,</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">:destroy</span><span class="p">]</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="router" -->

<p>You can also use the <code>except</code> keyword.</p>

<hr>

<h2>Controller &lt;=&gt; View</h2>

<h3>7 standard CRUD routes =&gt; 7 instance methods</h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controller/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>         <span class="c1"># GET /restaurants</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>          <span class="c1"># GET /restaurants/:id</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>           <span class="c1"># GET /restaurants/new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>        <span class="c1"># POST /restaurants</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>          <span class="c1"># GET /restaurants/:id/edit</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>        <span class="c1"># PATCH /restaurants/:id</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>       <span class="c1"># DELETE /restaurants/:id</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<h2>Read (all)</h2>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@restaurants</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->
<div class="highlight"><pre class="highlight erb"><code><span class="c">&lt;!-- app/views/restaurants/index.html.erb --&gt;</span>
<span class="cp">&lt;%</span> <span class="vi">@restaurants</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">restaurant</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;h2&gt;</span><span class="cp">&lt;%=</span> <span class="n">restaurant</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">restaurant</span><span class="p">.</span><span class="nf">address</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>
<!-- .element: class="view fragment" data-fragment-index="1" -->

<h2>Read (one)</h2>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->
<div class="highlight"><pre class="highlight erb"><code><span class="c">&lt;!-- app/views/restaurants/show.html.erb --&gt;</span>
<span class="nt">&lt;h2&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">address</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre></div>
<!-- .element: class="view fragment" data-fragment-index="1" -->

<h2>Create &amp; Update</h2>

<p>Remember, 2 requests for create:</p>

<ul>
<li>The first one to <code>GET</code> the empty HTML form</li>
<li>The second one to <code>POST</code> this form</li>
</ul>

<p><br><br></p>

<p>And for update, 2 requests as well:</p>

<ul>
<li>The first one to <code>GET</code> the pre-populated HTML form of existing record</li>
<li>The second one to <code>PATCH</code> this form</li>
</ul>

<h3>Building the <code>new</code> form, by hand</h3>
<div class="highlight"><pre class="highlight html"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/restaurants"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;</span><span class="err">%=</span> <span class="na">hidden_field_tag</span> <span class="na">:authenticity_token</span><span class="err">,</span> <span class="na">form_authenticity_token</span> <span class="err">%</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"name"</span><span class="nt">&gt;</span>Name: <span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"restaurant[name]"</span> <span class="na">id=</span><span class="s">"name"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"address"</span><span class="nt">&gt;</span>Address: <span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"restaurant[address]"</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<p>On  <code>POST</code>, the <code>params</code> will be populated with</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># params</span>
<span class="p">{</span>
  <span class="ss">restaurant: </span><span class="p">{</span>
    <span class="ss">name: </span><span class="s2">"La tour d'argent"</span><span class="p">,</span>
    <span class="ss">address: </span><span class="s2">"15 Quai de la Tournelle"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<!-- .element: class="controller fragment" data-fragment-index="1" -->

<h2>Building the <code>edit</code> form, by hand</h2>

<p>Same as <code>new</code> form, but with <code>value</code> attributes:</p>
<div class="highlight"><pre class="highlight html"><code><span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"name"</span><span class="nt">&gt;</span>Name: <span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"restaurant[name]"</span> <span class="na">id=</span><span class="s">"name"</span>
       <span class="na">value=</span><span class="s">"La Tour d'Argent"</span><span class="nt">&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<h3>DRY</h3>

<h2><code>form_for</code></h2>
<div class="highlight"><pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">form_for</span><span class="p">(</span><span class="vi">@restaurant</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:address</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:address</span> <span class="cp">%&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>
<p><em>disclaimer</em>: behaves differently for <strong>new</strong> record or <strong>existing</strong> record.</p>

<h2><code>form_for</code> with Bootstrap</h2>
<div class="highlight"><pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">form_for</span><span class="p">(</span><span class="vi">@restaurant</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'form-control'</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:address</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:address</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'form-control'</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">class: </span><span class="s1">'btn btn-primary'</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>
<h3><code>@restaurant</code></h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<p><code>new.html.erb</code> <strong>AND</strong> <code>edit.html.erb</code></p>
<div class="highlight"><pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">form_for</span><span class="p">(</span><span class="vi">@restaurant</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:address</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:address</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<h3>DRY</h3>

<h3>Partial View</h3>

<p>Define the <code>_form</code> partial view (partials starts with a <code>_</code>)
<code>erb
&lt;!-- app/views/restaurants/_form.html.erb --&gt;
&lt;%= form_for(restaurant) do |f| %&gt;
  &lt;%= f.label :name %&gt;
  &lt;%= f.text_field :name %&gt;
  &lt;%= f.label :address %&gt;
  &lt;%= f.text_field :address %&gt;
  &lt;%= f.submit %&gt;
&lt;% end %&gt;
</code>
&lt;!-- .element: class=&quot;view&quot; --&gt;</p>

<p><br>
Use this partial in <code>new</code> and <code>edit</code> views:
<code>erb
&lt;!-- app/views/restaurants/new.html.erb --&gt;
&lt;%= render &#39;form&#39;, restaurant: @restaurant %&gt;
</code>
&lt;!-- .element: class=&quot;view&quot; --&gt;</p>
<div class="highlight"><pre class="highlight erb"><code><span class="c">&lt;!-- app/views/restaurants/edit.html.erb --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'form'</span><span class="p">,</span> <span class="ss">restaurant: </span><span class="vi">@restaurant</span> <span class="cp">%&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<h3>What now?</h3>

<p>We built the form.</p>

<p>We need to handle the <code>POST</code> and <code>PATCH</code> requests coming from them!</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:restaurant</span><span class="p">])</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">save</span>
    <span class="c1"># Will raise ActiveModel::ForbiddenAttributesError</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:restaurant</span><span class="p">])</span>
    <span class="c1"># Will raise ActiveModel::ForbiddenAttributesError</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<h3>Strong Params</h3>

<p>Why?</p>

<p>Suppose we have this schema and this app.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># db/schema.rb</span>
<span class="n">create_table</span> <span class="s2">"users"</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
  <span class="n">t</span><span class="p">.</span><span class="nf">string</span>   <span class="s2">"email"</span>
  <span class="n">t</span><span class="p">.</span><span class="nf">string</span>   <span class="s2">"encrypted_password"</span>
  <span class="n">t</span><span class="p">.</span><span class="nf">boolean</span>  <span class="s2">"admin"</span>
  <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"created_at"</span>
  <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"updated_at"</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="model" -->
<div class="highlight"><pre class="highlight erb"><code><span class="c">&lt;!-- app/views/users/_form.html.erb --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">form_for</span><span class="p">(</span><span class="vi">@user</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:email</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<div class="down-arrow"></div>
<div class="highlight"><pre class="highlight html"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/users/1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"user[email]"</span> <span class="na">value=</span><span class="s">"bob@leponge.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>
<p>A malicious user could <strong>update</strong> the HTML in the browser</p>
<div class="highlight"><pre class="highlight html"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/users/1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"user[email]"</span> <span class="na">value=</span><span class="s">"bob@leponge.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"user[admin]"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<p>And submit the form</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/users_controller.rb</span>
<span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@user</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:user</span><span class="p">])</span>
    <span class="c1"># Will raise ActiveModel::ForbiddenAttributesError</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/users_controller.rb</span>
<span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@user</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">user_params</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">user_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:user</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:email</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<h3>Summary: Never trust user data</h3>

<p>Rails forces you to <strong>whitelist</strong> the <code>params</code> with <code>require</code> and <code>permit</code>.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">restaurant_params</span><span class="p">)</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">save</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">restaurant_params</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">restaurant_params</span>
    <span class="c1"># *Strong params*: You need to *whitelist* what can be updated by the user</span>
    <span class="c1"># Never trust user data!</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:restaurant</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:address</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<h3>What next?</h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">restaurant_params</span><span class="p">)</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">save</span>

    <span class="c1"># no need for app/views/restaurants/create.html.erb</span>
    <span class="n">redirect_to</span> <span class="n">restaurant_path</span><span class="p">(</span><span class="vi">@restaurant</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">restaurant_params</span><span class="p">)</span>

    <span class="c1"># no need for app/views/restaurants/update.html.erb</span>
    <span class="n">redirect_to</span> <span class="n">restaurant_path</span><span class="p">(</span><span class="vi">@restaurant</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">restaurant_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:restaurant</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:address</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<h2>Delete</h2>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@restaurant</span><span class="p">.</span><span class="nf">destroy</span>

    <span class="c1"># no need for app/views/restaurants/destroy.html.erb</span>
    <span class="n">redirect_to</span> <span class="n">restaurants_path</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<p><br></p>
<div class="highlight"><pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Delete"</span><span class="p">,</span> <span class="n">restaurant_path</span><span class="p">(</span><span class="n">restaurant</span><span class="p">),</span>
      <span class="ss">method: :delete</span><span class="p">,</span>
      <span class="ss">data: </span><span class="p">{</span> <span class="ss">confirm: </span><span class="s2">"Are you sure?"</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<hr>

<h2>Filters</h2>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<h3>DRY</h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># app/controllers/restaurants_controller.rb</span>
<span class="k">class</span> <span class="nc">RestaurantsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">before_action</span> <span class="ss">:set_restaurant</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:show</span><span class="p">,</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">:update</span><span class="p">,</span> <span class="ss">:destroy</span><span class="p">]</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">edit</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">set_restaurant</span>
    <span class="vi">@restaurant</span> <span class="o">=</span> <span class="no">Restaurant</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<!-- .element: class="controller" -->

<hr>

<h2>Links and Route names</h2>

<h3><code>link_to</code> helper</h3>
<div class="highlight"><pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight erb"><code><span class="c">&lt;!-- app/views/restaurants/index.html.erb --&gt;</span>
<span class="cp">&lt;%</span> <span class="vi">@restaurants</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">restaurant</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">restaurant</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">restaurant_path</span><span class="p">(</span><span class="n">restaurant</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>
<!-- .element: class="view" -->

<div class="down-arrow"></div>
<div class="highlight"><pre class="highlight html"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/restaurants/1"</span><span class="nt">&gt;</span>Chez Gladines<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/restaurants/2"</span><span class="nt">&gt;</span>Le Temps des Cerises<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/restaurants/3"</span><span class="nt">&gt;</span>La Tour d'Argent<span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<h3><code>rails routes</code></h3>
<div class="highlight"><pre class="highlight shell"><code>         Prefix Verb   URI Pattern                     Controller#Action
    restaurants GET    /restaurants<span class="o">(</span>.:format<span class="o">)</span>          restaurants#index
                POST   /restaurants<span class="o">(</span>.:format<span class="o">)</span>          restaurants#create
 new_restaurant GET    /restaurants/new<span class="o">(</span>.:format<span class="o">)</span>      restaurants#new
edit_restaurant GET    /restaurants/:id/edit<span class="o">(</span>.:format<span class="o">)</span> restaurants#edit
     restaurant GET    /restaurants/:id<span class="o">(</span>.:format<span class="o">)</span>      restaurants#show
                PATCH  /restaurants/:id<span class="o">(</span>.:format<span class="o">)</span>      restaurants#update
                DELETE /restaurants/:id<span class="o">(</span>.:format<span class="o">)</span>      restaurants#destroy
</code></pre></div>
<p><br><br></p>

<p>Add <code>_path</code> to the route prefix (left column).</p>

<hr>

<p>Your turn! Let&#39;s build a simple CRUD app with just one model.</p>

          </div>
        </div>
      </div>
    </div>
    <div id="mobile-lecture-day-controls" class="d-sm-none">
    <a class="btn btn-default" href="/knowledge/lectures/05-Rails%2F01-Rails-intro">
      <i class="mdi mdi-chevron-left"></i> Routing, Controllers &amp; Views
</a>    <a class="btn btn-default force-right" href="/knowledge/lectures/05-Rails%2F03-Rails-restaurant-reviews">
      Advanced Routing <i class="mdi mdi-chevron-right"></i>
</a></div>

  </div>
</div>



    

    <meta name="action-cable-url" content="/cable" />
    
    <script src="/assets/application-0260df175a97e5e59557aef2ac550efcfd3516c3156f088e42369d00167b2305.js"></script>
    <script src="/packs/application-2c0308e389afa07adad3.js"></script>
    
  <script src="/packs/knowledge-4b1e7e90f6b657c533eb.js"></script>

  </body>
</html>
